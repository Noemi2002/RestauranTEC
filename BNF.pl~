:-consult('basebnf.pl').
:-consult('basese.pl').

% Reglas gramaticales
oracion(Oracion, Resultado) :- saludo(Oracion, Resultado).
oracion(Oracion, Resultado) :- saludo(Oracion, Res1), sintagma(Res1, Resultado).
oracion(Oracion, Resultado) :- saludo(Oracion, Res1), sustantivo(Res1, Resultado, _).
oracion(Oracion, Resultado) :- sintagma(Oracion, Resultado).
oracion(Oracion, Resultado) :- adverbio(Oracion, Res1), sintagma_descriptivo(Res1, Resultado).
oracion(Oracion, Resultado) :- adverbio(Oracion, Res1), sintagma_verbal(Res1, Resultado).
oracion(Oracion, Resultado) :- adverbio(Oracion, Res1), sintagma_nominal(Res1, Resultado).
oracion(Oracion, Resultado) :- adverbio(Oracion, Res1), sintagma_nominal(Res1, Resultado).
oracion(Oracion, Resultado) :- adverbio(Oracion, Resultado).
oracion(Oracion, Resultado) :- sintagma_descriptivo(Oracion, Res1), sintagma_preposicional(Res1, Resultado).
oracion(Oracion, Resultado) :- despedida(Oracion, Resultado).
oracion(Oracion, Resultado) :- despedida(Oracion, Res1), sustantivo(Res1, Resultado, _).

saludo(Oracion, Resultado) :- saludar1(Oracion, Resultado).
saludo(Oracion, Resultado) :- saludar2(Oracion, Res1), saludar3(Res1, Resultado).
saludo(Oracion, Resultado) :- saludar4(Oracion, Res1), saludar5(Res1, Resultado).

despedida(Oracion, Resultado) :- despedir(Oracion, Resultado).

sintagma(Oracion, Resultado) :- sintagma_nominal(Oracion, Res1), sintagma_verbal(Res1, Resultado).
sintagma(Oracion, Resultado) :- sintagma_nominal(Oracion, Res1), sintagma_descriptivo(Res1, Resultado).

sintagma_preposicional(Oracion, Resultado) :- preposicion(Oracion, Res1), sintagma_nominal(Res1, Resultado).

sintagma_descriptivo(Oracion, Resultado) :- adverbio(Oracion, Res1), verbo(Res1, Resultado).
sintagma_descriptivo(Oracion, Resultado) :- adverbio(Oracion, Res1), determinante(Res1, Resultado, _).

sintagma_nominal(Oracion, Resultado) :- determinante(Oracion, Res1, Genero), sustantivo(Res1, Resultado, Genero).
sintagma_nominal(Oracion, Resultado) :- determinante(Oracion, Res1, _), sustantivo(Res1, Resultado, _).
sintagma_nominal(Oracion, Resultado) :- determinante(Oracion, Res1, Genero), verbo(Res1, Resultado).

sintagma_verbal(Oracion, Resultado) :- verbo(Oracion, Resultado).
sintagma_verbal(Oracion, Resultado) :- verbo(Oracion, Res1), sintagma_nominal(Res1, Resultado).
sintagma_verbal(Oracion, Resultado) :- verbo(Oracion, Res1), sintagma_nominal(Res1, Resultado).
sintagma_verbal(Oracion, Resultado) :- verbo(Oracion, Res1), sintagma_nominal(Res1, Resultado).
sintagma_verbal(Oracion, Resultado) :- verbo(Oracion, Res1), sintagma_nominal(Res1, Resultado).

% Reglas adicionales basadas en la base de datos

%saludo1([Saludo|Rest], Rest) :- saludar1([Saludo|Rest], Rest).
%saludo1([Saludo|Rest], Rest) :- saludar2([Saludo|Rest], Rest).
%saludo1([Saludo|Rest], Rest) :- saludar3([Saludo|Rest], Rest).

%saludo4([Saludo|Rest], Rest) :- saludo4([Saludo|Rest], Rest).

%saludo5([Saludo|Rest], Rest) :- saludar5([Saludo|Rest], Rest).

sustantivo([Sustantivo|Rest], Rest, Genero) :- sustantivo([Sustantivo|Rest], Rest, Genero).
sustantivo([Sustantivo|Rest], Rest, Genero) :- sustantivo([Sustantivo|Rest], Rest, _).

determinante([Determinante|Rest], Rest, Genero) :- determinante([Determinante|Rest], Rest, Genero).
determinante([Determinante|Rest], Rest, Genero) :- determinante([Determinante|Rest], Rest, _).

preposicion([Preposicion|Rest], Rest) :- preposicion([Preposicion|Rest], Rest).

verbo([Verbo|Rest], Rest) :- verbo([Verbo|Rest], Rest).

adverbio([Adverbio|Rest], Rest) :- adverbio([Adverbio|Rest], Rest).

despedir([Despedida|Rest], Rest) :- despedir([Despedida|Rest], Rest).

% Predicado para probar oraciones

test :-
    write('Ingrese una oración: '),
    read(X),
    oracion(X, []),
    write('La oración es válida.'),
    nl,
    test.








